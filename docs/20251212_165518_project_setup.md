# 国土交通省 適正原価に関する実態調査 WEBサイト構築記録

## 基本情報
- **作成日時**: 2024年12月12日 16:55
- **プロジェクト名**: mlit-cost-survey
- **対象業界**: 貨物自動車運送事業

---

## 1. プロジェクト概要

国土交通省が実施する「適正原価に関する実態調査」のためのWEBシステム。
貨物自動車運送事業者を対象に、原価実態のアンケート調査を行う。

### 主要機能（予定）
- トップページ（スタイリッシュなランディングページ）
- 調査画面（アンケートフォーム）
- 動画解説ページ
- データ検索機能
- Supabaseによるデータベース連携
- SendGridによるメール送信

---

## 2. 技術スタック

| 項目 | 技術/バージョン |
|------|----------------|
| フレームワーク | Next.js 16.0.10 |
| 言語 | TypeScript |
| スタイリング | Tailwind CSS 4 |
| データベース | Supabase |
| メール送信 | SendGrid |
| アニメーション | Framer Motion |
| アイコン | Lucide React |
| 動画再生 | React Player |
| Excel出力 | xlsx |

---

## 3. セットアップ手順（実施済み）

### 3.1 プロジェクト作成（14:20頃）
```bash
npx create-next-app@latest . --typescript --tailwind --eslint --app --src-dir --import-alias "@/*" --use-npm
```

### 3.2 パッケージインストール（14:25頃）
```bash
npm install @supabase/supabase-js @sendgrid/mail xlsx lucide-react framer-motion
npm install @supabase/ssr react-player
```

### 3.3 ディレクトリ構造作成
```
src/
├── app/
│   ├── survey/        # 調査画面
│   ├── api/
│   │   ├── survey/    # 調査API
│   │   ├── send-email/ # メール送信API
│   │   └── export/    # エクスポートAPI
│   ├── layout.tsx
│   ├── page.tsx
│   └── globals.css
├── components/        # 共通コンポーネント
├── lib/
│   └── supabase.ts   # Supabaseクライアント
└── types/
    └── survey.ts     # 型定義
```

---

## 4. GitHub連携（14:30頃）

### 4.1 GitHub CLI認証
```bash
gh auth login --web
# コード: C9EF-F9B3 で認証完了
```

### 4.2 リポジトリ作成
```bash
gh repo create mlit-cost-survey --public --source=. --remote=origin --push --description "国土交通省 適正原価に関する実態調査WEBシステム"
```

**GitHub URL**: https://github.com/pmicconsulting/mlit-cost-survey

---

## 5. Vercel連携（14:35頃）

### 5.1 Vercel CLI認証
```bash
npx vercel login
# コード: CPBH-ZMSP で認証完了
```

### 5.2 プロジェクトデプロイ
```bash
npx vercel --prod
```

### 5.3 vercel.json設定追加
Next.jsフレームワークを明示的に指定するため、`vercel.json`を作成：
```json
{
  "framework": "nextjs",
  "buildCommand": "npm run build",
  "outputDirectory": ".next"
}
```

**本番URL**: https://mlitcostsurvey.vercel.app

---

## 6. トップページ作成・修正

### 6.1 初期作成（14:40頃）
- スタイリッシュなランディングページを作成
- ヘッダー、ヒーローセクション、機能紹介、統計、CTA、フッター

### 6.2 修正対応（16:50頃）
ユーザーからの指示に基づき以下を修正：

**変更前**
- 対象業界: 建設業界
- 機能カード: 4つ（調査回答、動画解説、データ検索、レポート出力）
- 統計セクション: あり（回答企業数、都道府県、回答率）

**変更後**
- 対象業界: **貨物自動車運送事業**
- 機能カード: 3つ（調査回答、動画解説、データ検索）※レポート出力削除
- 統計セクション: **削除**
- アイコン: TrendingUp → Truck に変更

---

## 7. コミット履歴

| 日時 | コミットメッセージ |
|------|-------------------|
| 14:25 | Initial commit from Create Next App |
| 14:30 | feat: 国土交通省適正原価実態調査システムの初期構築 |
| 14:45 | chore: .gitignoreにVercel設定を追加 |
| 14:50 | fix: Vercel設定ファイルを追加 |
| 16:50 | fix: トップページを貨物自動車運送事業向けに変更 |

---

## 8. 環境変数（設定が必要）

`.env.local`に以下を設定：
```
# Supabase
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key

# SendGrid
SENDGRID_API_KEY=your_sendgrid_api_key
SENDGRID_FROM_EMAIL=noreply@example.com
```

---

## 9. 今後の実装予定

- [ ] `/survey` - 調査回答画面の実装
- [ ] `/video` - 動画解説ページの実装
- [ ] `/search` - データ検索機能の実装
- [ ] Supabaseデータベース設計・連携
- [ ] SendGridメール送信機能
- [ ] 管理者向けExcelエクスポート機能

---

## 10. 参考URL

- **GitHub**: https://github.com/pmicconsulting/mlit-cost-survey
- **本番サイト**: https://mlitcostsurvey.vercel.app
- **Vercelダッシュボード**: https://vercel.com/pmis-projects/mlit_cost_survey

---

*最終更新: 2024年12月12日 16:55*
